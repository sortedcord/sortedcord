!function(){"use strict";function t(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function e(t){return u.push(t),u}var n=function(t,e){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,!0),n.onreadystatechange=function(t,e){return function(){if(4===t.readyState&&200===t.status)try{e(null,JSON.parse(t.responseText))}catch(t){e(t,null)}}}(n,e),n.send()},r=new function(){this.matches=function(t,e){return function(t,e){var n=e.length,r=t.length;if(r>n)return!1;if(r===n)return t===e;t:for(var i=0,o=0;i<r;i++){for(var u=t.charCodeAt(i);o<n;)if(e.charCodeAt(o++)===u)continue t;return!1}return!0}(e,t)}},i=new function(){this.matches=function(t,e){return"string"==typeof t&&(t=t.trim()).toLowerCase().indexOf(e.toLowerCase())>=0}},o={put:function(n){return t(n)?e(n):function(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}(n)?function(n){for(var r=[],i=0,o=n.length;i<o;i++)t(n[i])&&r.push(e(n[i]));return r}(n):void 0},clear:function(){return u.length=0,u},search:function(t){return t?function(t,e,n,r){for(var i=[],o=0;o<t.length&&i.length<r.limit;o++){var u=function(t,e,n,r){for(var i in t)if(!function(t,e){for(var n=!1,r=0,i=(e=e||[]).length;r<i;r++){var o=e[r];!n&&new RegExp(t).test(o)&&(n=!0)}return n}(t[i],r.exclude)&&n.matches(t[i],e))return t}(t[o],e,n,r);u&&i.push(u)}return i}(u,t,a.searchStrategy,a):[]},setOptions:function(t){(a=t||{}).fuzzy=t.fuzzy||!1,a.limit=t.limit||10,a.searchStrategy=t.fuzzy?r:i}},u=[],a={fuzzy:!1,limit:10};a.searchStrategy=a.fuzzy?r:i;var c={compile:function(t){return l.template.replace(l.pattern,function(e,n){var r=l.middleware(n,t[n],l.template);return void 0!==r?r:t[n]||e})},setOptions:function(t){l.pattern=t.pattern||l.pattern,l.template=t.template||l.template,"function"==typeof t.middleware&&(l.middleware=t.middleware)}},l={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}},f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r],void 0!==e[r]&&(n[r]=e[r]));return n},s=function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}};!function(t){function e(t){o.put(t),a.searchInput.addEventListener("keyup",function(t){(function(t){return-1===[13,16,20,37,38,39,40,91].indexOf(t)})(t.which)&&(a.resultsContainer.innerHTML="",i(t.target.value))})}function r(t){a.resultsContainer.innerHTML+=t}function i(t){(function(t){return t&&t.length>0})(t)&&function(t){var e=t.length;if(0===e)return r(a.noResultsText);for(var n=0;n<e;n++)r(c.compile(t[n]))}(o.search(t))}function u(t){throw new Error("SimpleJekyllSearch --- "+t)}var a={searchInput:null,resultsContainer:null,json:[],searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:function(){},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},l=["searchInput","resultsContainer","json"],p=function t(e){if(!function(t){return!!t&&void 0!==t.required&&t.required instanceof Array}(e))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof t))return new t(e);var n=e.required;this.getRequiredOptions=function(){return n},this.validate=function(t){var e=[];return n.forEach(function(n){void 0===t[n]&&e.push(n)}),e}}({required:l});t.SimpleJekyllSearch=function(t){return p.validate(t).length>0&&u("You must specify the following required options: "+l),a=f(a,t),c.setOptions({template:a.searchResultTemplate,middleware:a.templateMiddleware}),o.setOptions({fuzzy:a.fuzzy,limit:a.limit}),s(a.json)?e(a.json):function(t){n(t,function(n,r){n&&u("failed to get JSON ("+t+")"),e(r)})}(a.json),{search:i}},t.SimpleJekyllSearch.init=t.SimpleJekyllSearch,"function"==typeof t.SimpleJekyllSearchInit&&t.SimpleJekyllSearchInit.call(this,t.SimpleJekyllSearch)}(window)}();